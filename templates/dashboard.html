{% extends "base.html" %}
{% block title %}ุฏุงุดุจูุฑุฏ{% endblock %}
{% block content %}
    <div class="max-w-5xl mx-auto mt-6">

        <!-- ุฎูุดโุขูุฏฺฏู -->
        <div class="bg-white shadow-sm border border-gray-200 rounded-2xl p-6 mb-6">
            <h1 class="text-2xl font-bold text-brand mb-2"> ุฎูุด ุขูุฏุ {{ user.first_name|default:user.username }}!</h1>
            <p class="text-gray-600">
                {% if user.is_representative %}
                    ุดูุง ููุงูุฏูโ ฺฉ ุชู ูุณุชุฏ. ุงุฒ ุงูุฌุง ูโุชูุงูุฏ ุชูโุชุงู ุฑุง ูุฏุฑุช ฺฉูุฏุ ุงุนุถุง ุฑุง ุงุถุงูู ฺฉูุฏ ู
                    ูพุฑูฺูโุชุงู ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ.
                {% else %}
                    ุดูุง ุนุถู ุชู ูุณุชุฏ. ูโุชูุงูุฏ ุงุทูุงุนุงุช ุชู ู ูพุฑูฺูโ ุฎูุฏ ุฑุง ูุดุงูุฏู ฺฉูุฏ.
                {% endif %}
            </p>
        </div>

        <!-- ูุถุนุช ุชู -->
        <div class="bg-white shadow-sm border border-gray-200 rounded-2xl p-6 mb-6">
            <h2 class="text-xl font-semibold text-brand mb-4"> ูุถุนุช ุชู ุดูุง</h2>
            {% if user.teams.all %}
                {% for team in user.teams.all %}
                    <div class="border rounded-lg p-4 mb-4 bg-gray-50">
                        <p><strong>ูุงู ุชู:</strong> {{ team.name }}</p>
                        <p><strong>ููุงูุฏู:</strong> {{ team.representative.get_full_name }}</p>
                        <p><strong>ุชุนุฏุงุฏ ุงุนุถุง:</strong> {{ team.members.count }}</p>

                        {% if team.status == "draft" %}
                            <p class="mt-2 text-yellow-600 font-semibold">๐ ูุถุนุช: ุฏุฑ ุญุงู ุซุจุชโูุงู / ุชฺฉูู ุชู</p>
                        {% elif team.status == "submitted" %}
                            <p class="mt-2 text-blue-700 font-semibold">โณ ูุถุนุช: ุงูุชุฎุงุจ ูพุฑูฺู ุงูุฌุงู ุดุฏู ู ุฏุฑ ุงูุชุธุงุฑ
                                ุชุฃุฏ</p>
                        {% elif team.status == "assigned" %}
                            <p class="mt-2 text-green-700 font-semibold">โ ูพุฑูฺู ููุง ุชุฎุตุต ุฏุงุฏู ุดุฏู</p>
                            <p><strong>ูพุฑูฺู:</strong> {{ team.final_project.title }}</p>
                        {% endif %}
                    </div>
                {% endfor %}
            {% else %}
                {% if user.is_representative %}
                    <p class="text-gray-600">ุดูุง ูููุฒ ุชู ุงุฌุงุฏ ูฺฉุฑุฏูโุงุฏ.</p>
                    <a href="{% url 'projects:team_create' %}"
                       class="mt-3 inline-block bg-brand text-white px-5 py-2 rounded-lg shadow hover:bg-blue-800">
                        โ ุงุฌุงุฏ ุชู ุฌุฏุฏ
                    </a>
                {% else %}
                    <p class="text-gray-600">ุดูุง ูููุฒ ุฏุฑ ูฺ ุชู ุนุถู ูุณุชุฏ. ููุชุธุฑ ุจุงุดุฏ ุชุง ููุงูุฏูโ ุชู ุดูุง ุฑุง ุงุถุงูู
                        ฺฉูุฏ.</p>
                {% endif %}
            {% endif %}
        </div>

        <!-- ฺฉุงุฑุชโูุง ุณุฑุน -->
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
            {% if user.is_representative %}
                <a href="{% url 'projects:team_create' %}"
                   class="block bg-white rounded-xl shadow hover:shadow-md p-5 border border-gray-200 hover:border-brand transition">
                    <h3 class="font-bold text-brand mb-1">โ ุงุฌุงุฏ ุชู</h3>
                    <p class="text-gray-600 text-sm">ุชู ุฌุฏุฏ ุจุณุงุฒ ู ุงุนุถุง ุฑุง ุงุถุงูู ฺฉู.</p>
                </a>
                <a href="
                        {% if user.teams.first %}{% url 'projects:team_manage' user.teams.first.id %}{% else %}#{% endif %}"
                   class="block bg-white rounded-xl shadow hover:shadow-md p-5 border border-gray-200 hover:border-brand transition">
                    <h3 class="font-bold text-brand mb-1">๐ฅ ูุฏุฑุช ุงุนุถุง</h3>
                    <p class="text-gray-600 text-sm">ุงุนุถุง ุชู ุฑุง ุงุถุงูู ุง ุญุฐู ฺฉู.</p>
                </a>
                <a href="
                        {% if user.teams.first %}{% url 'projects:project_select' user.teams.first.id %}{% else %}#{% endif %}"
                   class="block bg-white rounded-xl shadow hover:shadow-md p-5 border border-gray-200 hover:border-brand transition">
                    <h3 class="font-bold text-brand mb-1">๐ฏ ุงูุชุฎุงุจ ูพุฑูฺู</h3>
                    <p class="text-gray-600 text-sm">ุณู ูพุฑูฺูโ ููุฑุฏ ุนูุงูู ุฑุง ุจุฑุง ุชู ุงูุชุฎุงุจ ฺฉู.</p>
                </a>
            {% endif %}

            {% if user.is_staff %}

                <a href="{% url 'projects:admin_assign' %}"
                   class="block bg-white rounded-xl shadow hover:shadow-md p-5 border border-gray-200 hover:border-brand transition">
                    <h3 class="font-bold text-brand mb-1"> ูุฏุฑุช ูพุฑูฺูโูุง</h3>
                    <p class="text-gray-600 text-sm">ุงูุชุฎุงุจโูุง ุฑุง ุจุจู ู ูพุฑูฺูโูุง ุฑุง ุชุฎุตุต ุจุฏู.</p>
                </a>
                <a href="{% url 'projects:distribute' %}"
                   class="block bg-white rounded-xl shadow hover:shadow-md p-5 border border-gray-200 hover:border-brand transition">
                    <h3 class="font-bold text-brand mb-1"> ุชูุฒุน ุฎูุฏฺฉุงุฑ</h3>
                    <p class="text-gray-600 text-sm">ูพุฑูฺูโูุง ุฑุง ุฎูุฏฺฉุงุฑ ุจู ุชูโูุง ูพุฎุด ฺฉู.</p>
                </a>
                <a href="{% url 'users:upload_students' %}"
                   class="block bg-white rounded-xl shadow hover:shadow-md p-5 border border-gray-200 hover:border-brand transition">
                    <h3 class="font-bold text-brand mb-1">ุงูุฒูุฏู ฺฉุงุฑุจุฑ</h3>
                    <p class="text-gray-600 text-sm">ุจุง ูุณุช ุฎูุฏ ุดุงูู ุงูู ูุดูุงุฑู ุฏุงูุดุฌู ฺฉุงุฑุจุฑ ุงุถุงูู ฺฉูุฏ.</p>
                </a>
                <a href="{% url 'projects:export_csv' %}"
                   class="block bg-white rounded-xl shadow hover:shadow-md p-5 border border-gray-200 hover:border-brand transition">
                    <h3 class="font-bold text-brand mb-1"> ุฎุฑูุฌ CSV</h3>
                    <p class="text-gray-600 text-sm">ูุณุช ุชูโูุง ู ูพุฑูฺูโูุง ุฑุง ุฏุฑุงูุช ฺฉู.</p>
                </a>
            {% endif %}
        </div>
    </div>
{% endblock %}

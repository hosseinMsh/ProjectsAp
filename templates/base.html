<!-- templates/base.html -->
<!doctype html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{% block title %}Ø³Ø§Ù…Ø§Ù†Ù‡ Ø«Ø¨Øª Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§{% endblock %}</title>
  <script src="https://cdn.shraif.ir/cdn/ictc/pinghub/tailwindcss.js"></script>

  <script>
    tailwind.config = {
      theme: {
        extend: { colors: { brand: "#1966ab" } }
      }
    };
  </script>

  <!-- ÙÙˆÙ†Øª IRANSansX -->
  <style>
    @font-face {
      font-family: "IRANSansX";
      src: url("https://cdn.shraif.ir/cdn/ictc/tempalte/fonts/IRANSansX-Regular.ttf") format("truetype");
      font-weight: 400;
    }
    @font-face {
      font-family: "IRANSansX";
      src: url("https://cdn.shraif.ir/cdn/ictc/tempalte/fonts/IRANSansX-Medium.ttf") format("truetype");
      font-weight: 500;
    }
    @font-face {
      font-family: "IRANSansX";
      src: url("https://cdn.shraif.ir/cdn/ictc/tempalte/fonts/IRANSansX-Bold.ttf") format("truetype");
      font-weight: 700;
    }

    body, input, select, textarea, label, button {
      font-family: "IRANSansX", "Vazirmatn", "Segoe UI", sans-serif;
      direction: rtl;
    }

    
  </style>
</head>

<body class="bg-gray-100 text-gray-800 min-h-screen flex flex-col transition-colors duration-300">
<header class="bg-[#1966ab] text-white shadow-md transition-colors duration-300">
  <div class="max-w-6xl mx-auto px-5 py-3 flex justify-between items-center">
    <div class="text-lg font-bold">Ø³Ø§Ù…Ø§Ù†Ù‡ Ø«Ø¨Øª Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ÛŒ Ø¯Ø±Ø³ÛŒ</div>

    <!-- Ø¯Ú©Ù…Ù‡ ØªØºÛŒÛŒØ± ØªÙ… -->
    <button id="theme-toggle"
            class="text-sm font-medium bg-white/10 hover:bg-white/20 px-3 py-1 rounded-md transition">
      ğŸŒ“ ØªØºÛŒÛŒØ± ØªÙ…
    </button>

    <!-- Ø¯Ú©Ù…Ù‡ Ù…Ù†Ùˆ Ø¨Ø±Ø§ÛŒ Ù…ÙˆØ¨Ø§ÛŒÙ„ -->
    <button id="menu-toggle" class="sm:hidden text-sm font-medium bg-white/10 hover:bg-white/20 px-3 py-1 rounded-md transition">
      Ù…Ù†Ùˆ â–¾
    </button>
  </div>

  <!-- Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ -->
  <nav id="main-menu" class="hidden sm:flex flex-wrap gap-4 justify-center text-sm font-medium pb-3">
    <a href="/" class="hover:bg-white/20 px-2 py-1 rounded-md transition">Ø®Ø§Ù†Ù‡</a>
    <a href="{% url 'users:profile' %}" class="hover:bg-white/20 px-2 py-1 rounded-md transition">Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ú©Ø§Ø±Ø¨Ø±ÛŒ</a>
    <a href="{% url 'users:force_password_change' %}" class="hover:bg-white/20 px-2 py-1 rounded-md transition">ØªØºÛŒÛŒØ± Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±</a>

    {% if user.is_authenticated and user.is_staff %}
      <a href="{% url 'projects:admin_assign' %}" class="hover:bg-white/20 px-2 py-1 rounded-md transition">Ù…Ø¯ÛŒØ±ÛŒØª Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§</a>
      <a href="{% url 'projects:distribute' %}" class="hover:bg-white/20 px-2 py-1 rounded-md transition">ØªÙˆØ²ÛŒØ¹ Ø®ÙˆØ¯Ú©Ø§Ø±</a>
    {% endif %}

    {% if user.is_authenticated %}
      <form action="{% url 'users:logout' %}" method="post" class="inline">
        {% csrf_token %}
        <button type="submit" class="hover:bg-white/20 px-2 py-1 rounded-md text-red-100">Ø®Ø±ÙˆØ¬</button>
      </form>
    {% else %}
      <a href="{% url 'users:login' %}" class="hover:bg-white/20 px-2 py-1 rounded-md transition">ÙˆØ±ÙˆØ¯</a>
      <a href="{% url 'users:register' %}" class="hover:bg-white/20 px-2 py-1 rounded-md transition">Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…</a>
    {% endif %}
  </nav>

  <!-- Ù…Ù†ÙˆÛŒ Ù…ÙˆØ¨Ø§ÛŒÙ„ -->
  <div id="mobile-menu" class="hidden sm:hidden bg-[#1966ab] border-t border-white/20 px-5 py-2 flex flex-col gap-2 text-sm font-medium">
    <a href="/" class="hover:bg-white/20 px-2 py-1 rounded-md">Ø®Ø§Ù†Ù‡</a>
    <a href="{% url 'users:profile' %}" class="hover:bg-white/20 px-2 py-1 rounded-md">Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ú©Ø§Ø±Ø¨Ø±ÛŒ</a>
    <a href="{% url 'users:force_password_change' %}" class="hover:bg-white/20 px-2 py-1 rounded-md">ØªØºÛŒÛŒØ± Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±</a>

    {% if user.is_authenticated and user.is_staff %}
      <a href="{% url 'projects:admin_assign' %}" class="hover:bg-white/20 px-2 py-1 rounded-md">Ù…Ø¯ÛŒØ±ÛŒØª Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§</a>
      <a href="{% url 'projects:distribute' %}" class="hover:bg-white/20 px-2 py-1 rounded-md">ØªÙˆØ²ÛŒØ¹ Ø®ÙˆØ¯Ú©Ø§Ø±</a>
    {% endif %}

    {% if user.is_authenticated %}
      <form action="{% url 'users:logout' %}" method="post" class="inline">
        {% csrf_token %}
        <button type="submit" class="hover:bg-white/20 px-2 py-1 rounded-md text-red-200">Ø®Ø±ÙˆØ¬</button>
      </form>
    {% else %}
      <a href="{% url 'users:login' %}" class="hover:bg-white/20 px-2 py-1 rounded-md">ÙˆØ±ÙˆØ¯</a>
      <a href="{% url 'users:register' %}" class="hover:bg-white/20 px-2 py-1 rounded-md">Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…</a>
    {% endif %}
  </div>
</header>

<main class="flex-1 max-w-5xl mx-auto w-full p-4">
  {% for message in messages %}
    <div class="message border rounded p-3 mb-3 
      {% if message.tags == 'success' %}bg-green-100 text-green-800
      {% elif message.tags == 'error' %}bg-red-100 text-red-800
      {% elif message.tags == 'warning' %}bg-yellow-100 text-yellow-800
      {% else %}bg-blue-100 text-blue-800{% endif %}">
      {{ message }}
    </div>
  {% endfor %}
  {% block content %}{% endblock %}
</main>

<footer class="bg-white border-t py-3 text-center text-xs text-gray-500">
    Â© 2025 Sharif AP Portal â€¢ Developed by Hossein Masihi
</footer>

<script>

  // ---- Ù…Ù†ÙˆÛŒ Ù…ÙˆØ¨Ø§ÛŒÙ„ ----
  const toggle = document.getElementById("menu-toggle");
  const mobileMenu = document.getElementById("mobile-menu");
  toggle?.addEventListener("click", () => mobileMenu.classList.toggle("hidden"));
  window.addEventListener("resize", () => {
    if (window.innerWidth >= 640) mobileMenu.classList.add("hidden");
  });
</script>
</body>
</html>
